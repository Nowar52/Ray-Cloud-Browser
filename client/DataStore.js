/*
 *  Ray Cloud Browser: interactively skim processed genomics data with energy
 *  Copyright (C) 2012  SÃ©bastien Boisvert
 *
 *  This program is free software: you can redistribute it and/or modify
 *  it under the terms of the GNU General Public License as published by
 *  the Free Software Foundation, version 3 of the License.
 *
 *  This program is distributed in the hope that it will be useful,
 *  but WITHOUT ANY WARRANTY; without even the implied warranty of
 *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *  GNU General Public License for more details.
 *
 *  You should have received a copy of the GNU General Public License
 *  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */

function DataStore(kmerLength){

	this.sequence="TCTTCGAAAATCTCTTCAAACCACGTCAGCTTCACCTTGCAGTATATATGTTACTGACTTCGTCAGTTCTATCCACAACCTCAAAACGGTGTTTTGAGCTGACTTCGTCAGTTCTATCTACAACCTCAAAACACTGTTTTGAGCAACCTGCGGCTAGCTTCCTAGTTTGCTCTTTGATTTTCATTGAGTATTAGATGAGCTGACTTCGTCAGTTCTATCTACAACCTAGATACAATGGAGGTCGTCATGGACAATATTCTTCGAAAATCTCTTCAAACCACGTCAGCTTCATCGATGTGTCAATTCCTGTTGCAGAAGTGGTGGACAAGCATCCAGAAGTCTTGGAAATTCTAGTGGAGTTGGGTTTTAAACCCCTTGCCAATCCCTTAATGCGCAATACAGTTGGTCGTAAAGTATCACTTAAACAGGGTTCTAAGCTAGCAGGAACTCCTATGGACAAGATTGTACGCACACTGGAAGCGAATGGCTACGAAGTGATTGGATTAGATTCGTCAGTTCTATCCACAACCTCAAAACCTAATGACAGATGAACGGATTCATATCCTACGGGATATTTTGTTAGAATTGCACAATGGCGCCTCTCCTGAGTCGGTTCAAGATCGCTTTGATGCGACCTTTACGGGCGTGTCAGCCATCGAGATTTCCCTTATGGAGCACGAGCTGATGAACTCGGATTCGGGCGTCACTTTTGAAGATGTTATGGAACTCTGTGATGTCCATGCCAATCTTTTTAAAAATGCTATCAAAGGTGTCGAAGTTTTAGATACCGAACACCCTGGGCACCCAGTTCGTGTCTTTAAGGAAGAAAATTTGGCCCTCCGTGCAGCTTTGATTCGCATTCGTAGATTGTTAGATACCTATGAGTTGATGGAAGACGAGGAAATGCTGGCGGAGATGCGCAAGGGCTTGGTGCGTCTTCGTCAGTTCTATCCACAACCTCAAAACAGATGGGACTTGTGGGGCAATTTGACATCCATTACCAACGTAAAGAAGAACTCTTCTTTCCTATCATGGAGCGCTATGGACACGATTCACCTCCCAAAGTTATGTGGGGAGTGGATGATCAGATTAGGGAACTCTTTCAAACAGCTCTAACGACAGCCAAGTCACTACCAGAAGTGTCAATTAGCAGTGTAAAGGAAGCTTTTGAAGCTTTTGCGACAGAGTTTGAAAGTATGATTTTCAAGGAAGAGTCCATCCTCCTCATGATTCTCCTTGAGTCTTTTACTCAGGATGACTGGATTCAGATTGCGGAGGAGAGCGATGCCTATGGCTATGCCATCATCCGTCCGTCAGAGAAATGGGTGCCAGAACGACAGAGCTTTATTGAGGAAAAGATTGCAGAGGAGCCTGTACAGCTAGATACGGCAGAAGGTCAAGTTCAACAAGTCATAGATACGCCAGAAGGCCATTTTACCATTACCTTTACCCCTAAGGAAAAGGAAGCTGTGCTGGACCGCCATAGTCAACAGGCTTTTGGTAATGGCTATCTTTCAGTCGAGCAGGCCAATCTCATCCTCAATCATCTCCCTATGGAGATTACCTTTGTCAATAAAGAAGATATTTTCCAGTATTACAATGACAATACGCCAGCTGATGAGATGATTTTCAAACGAACGCCGTCCCAAGTCGGGCGCAATGTCGAACTCTGTCATCCGCCTAAGTATTTGGACAAGGTCAAGGCTATCATGAAGGGACTTCGTGAGGGGACCAAGGACAAGTATGAAATGTGGTTCAAGTCTGAGTCGCGAGGCAAGTTTGTCCACATCACCTATGCTGCAGTACACGATGAAGACGGAGAATTCCAAGGAGTGTTGGAGTATGTTCAGGATATCCAGCCCTACCGTGAGATTGATACGGACTATTTCCGTGGATTAGAATAAGGAGAAAAAATGAGTTACGAACAAGAATTTATGAAGGAATTTGAAGCTTGGGTCAATACCCAAATCATGATTAACGATATGGCGCACAAGGAAAGTCAAAAAGTTTACGAAGAAGACCAGGACGAGCGTGCCAAAGATGCCATGATTCGCTACGAGAGTCGCTTGGATGCTTATCAGTTCTTGCTTGGTAAGTTTGAAAACTTCAAAGCAGGCAAGGGATTCCATGATTTGCCAGAAGGCTTGTTTGGTGAGCGAAATTATTAAACGAGAAAGATTCTTGATTTTTCACTAAAATCTTGATAGAATGTTTATGTTAAATCCTTGTCAGAGCAGGGATTTTTTATTGAAAGGATTTTATCATGTCAAAGAAACTCAATCGTAAAAAACAATTACGAAATGGCCTCCGTCGCTCAGGTGCCTTTTCAAGTACTGTGACTAAGGTTGTAGATGAGACAAAAAAAGTCGTGAAGCGTGCAGAACAGTCAGCAAGCGCAGCTGGTAAGGCTGTTTCTAAAAAAGTTGAACAAGCAGTAGAAGCTACCAAAGAGCAAGCTCAAAAAGTAGCTAATTCTGTAGAAGATTTTGCAGCAAACTTGGGTGGACTTCCACTTGATCGTGCCAAGACTTTCTATGATGAAGGAATCAAGTCTGCTTCAGATTTCAAAAACTGGACTGAAAAAGAACTCCTTGACTTGAAAGGAATCGGCCCAGCTACCATCAAGAAATTGAAAGAAAATGGCATCAAGTTCAAGTAATTTTTCTTGAGCCTTGCATTTCCGAGAAAAACTTGCTACAATAGAGCCATTAGAGGTGTTTTGAATCCCACATTTTACAGAAAGTGGCGGCGCTGAGAAGTCCACAAATGTGTCAAAACTGGTTGCTAATGACTGAAAAAATGAAATATTTCTGTCTTTTTATTTTAAAGACTAAAGATGCGGGCTTGGCCCGAAATTGGGTGGTACCGCGGATAAACACATTCGTCCCTGTCATGTAGATGGCAGGGCTTTTCTTTTGTGTCTTAGTCAAAGGAGGTTGTTATAAAACAATCATTTAAAACTAATAAACTATATTATGGTTTTCCTGTTTTTATTTTAGGATATCAAGATTAGAATTTTGGCTATAACATCACGACCTGTAGTTCCTCTTATAGTCTAGGAGATTGGGTTGTGATTGGAGTCGTTGCGAGAGAGAATGCCGCAGAGCAGATCAAACAGTATCAAAAATTTACTGTGAATATTTCTGATGAAACTTCTATGCTTGCGATGGAGCAGGCTGGTTTTATCAGTCATCAGGAGAAATTGGAACGTTTGGGAGTGCATTATGAAATTTCTGAACGAACTCAGATTCCTATTTTAGACGCCTGTCCACTTGTTTTAGATTGTCGGGTAGATAGGATTGTTGAGGAAGACGGTATTTGCCACATCTTTGCCAAGATTCTTGAGCGACTTGTTGCCCCAGAACTCCTGGATGAAAAGGGACATTTTAAAAATCAACTGTTTGCCCCAACCTATTTCATGGGAGATGGATATCAGCGCGTTTATCGCTATCTGGATAAGCGTGTAGATATGAAGGGCAGTTTCATCAAAAAAGCGAGGAAGAAGGATGGCAAGAACTGAGCTGCCAGATAAAATCGAAACAGAACGTCTCGTTTTACGAGTCCGTACTGTGGCGGATGCTGAGGATATCTTTGACTATGCTAGTTTGCCAGAGGTCGCCTATCCAGCAGGTTTTCCTCCAGTCAAGACCTTGGAAGATGAGATTTATTATCTGGAGCACATTCTTCCGGAGCGTAATCAAAAGGAAAATCTCCCAGCAGGCTACGGGATTGTCGTCAAAGGAACGGATAAGATCGTTGGCTCTGTCGATTTCAACCATCGCCATGAAGATGATGTGCTGGAAATCGGCTATACCTTACACCCAGACTATTGGGGGCGAGGTTATGTGCCAGAAGCTGCGCGTGCCTTGATTGACTTAGCCTTTAAAGATTTGGGTCTTCACAAGATTGAACTAACTTGCTTTGGATATAACCTTCAAAGTAAACGAGTCGCGGAAAAGCTTGGCTTTACCCTCGAAGCTCGCATAAGAGACCGAAAGGATGTTCAAGGAAACCGCTGTGACAGTCTGATATATGGCTTGCTGAAGAGCGAGTGGGAGGAATAAGATGAGCGATGTAAAAGA";

	this.graphFiles=new Array();
	this.sequenceFiles=new Array();

	this.graphFiles.push("mock-kmers.txt");
	this.sequenceFiles.push("mock-Contigs.fasta");
	this.kmerLength=kmerLength;
}

DataStore.prototype.getSequenceFiles=function(){
	return this.sequenceFiles;
}

DataStore.prototype.getGraphFiles=function(){
	return this.graphFiles;
}

DataStore.prototype.getFirstKmer=function(){

	var prefix=this.sequence.substr(0,this.kmerLength);

	//console.log(prefix);
	return prefix;
}

DataStore.prototype.getKmerInformation=function(kmerSequence){

	var parents=new Array();
	var children=new Array();

	//console.log(kmerSequence);

	for(var i=0;i<this.sequence.length;i++){

		var theSequence=this.sequence.substr(i,this.kmerLength);

		if(kmerSequence==theSequence){
			if(i-1>=0){
				parents.push(this.sequence.substr(i-1,this.kmerLength));
			}
		
			if(i+1<this.sequence.length-this.kmerLength){
				children.push(this.sequence.substr(i+1,this.kmerLength));
			}
		}
	}

	var kmer=new Kmer(kmerSequence,99,parents,children);

	return kmer;
}

